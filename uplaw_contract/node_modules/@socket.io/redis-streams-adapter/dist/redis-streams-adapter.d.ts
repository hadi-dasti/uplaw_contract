import type { PrivateSessionId, Session } from "socket.io-adapter";
import { ClusterAdapter, ClusterAdapterOptions, ClusterMessage } from "./cluster-adapter";
export interface RedisAdapterOptions extends ClusterAdapterOptions {
    /**
     * The name of the stream.
     */
    streamName?: string;
    /**
     * The maximum size of the stream. Almost exact trimming (~) is used.
     * @default 10_000
     */
    maxLen?: number;
    /**
     * The number of elements to return per XREAD call
     * @default 100
     */
    readCount?: number;
}
interface RawClusterMessage {
    uid: string;
    nsp: string;
    type: string;
    data?: string;
}
/**
 * Returns a function that will create a RedisAdapter instance.
 *
 * @param redisClient - a Redis client that will be used to publish messages
 * @param opts - additional options
 */
export declare function createAdapter(redisClient: any, opts?: RedisAdapterOptions): (nsp: any) => RedisStreamsAdapter;
declare class RedisStreamsAdapter extends ClusterAdapter {
    #private;
    constructor(nsp: any, redisClient: any, opts: Required<RedisAdapterOptions>);
    doPublish(message: ClusterMessage): any;
    static encode(message: ClusterMessage): RawClusterMessage;
    onRawMessage(rawMessage: RawClusterMessage, offset: string): any;
    static decode(rawMessage: RawClusterMessage): ClusterMessage;
    persistSession(session: any): void;
    restoreSession(pid: PrivateSessionId, offset: string): Promise<Session>;
    /**
     * Exclusive ranges were added in Redis 6.2, so this is necessary for previous versions.
     * @param offset
     */
    static nextOffset(offset: any): string;
}
export {};
